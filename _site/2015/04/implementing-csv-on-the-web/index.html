<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/stylesheets/shiori.css">
    <link href='//fonts.googleapis.com/css?family=Montserrat:700,400' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="canonical" href="https://greggkellogg.net/2015/04/implementing-csv-on-the-web/">
    <link rel="shortcut icon" href="/favicon.ico">
    <title>Implementing CSV on the Web | Gregg Kellogg</title>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Additions to <head> tags go here. -->
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = "https://greggkellogg.net";  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = "greggkellogg-1"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = 'https://greggkellogg-1.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

  </head>
  <body>
  
    <nav class="navbar navbar-default navbar-static-top">
  
      <div class="container">
        <div class="navbar-header">
          <div class="navbar-toggle-wrapper visible-xs">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".js-navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <a href="/" class="navbar-brand">Gregg Kellogg</a>
        </div>
        <div class="collapse navbar-collapse js-navbar-collapse">
          <ul class="navbar-nav nav" data-purplecoat="shiori" data-purplecoat-label="nav.html">
            <li><a href="/archive">Archive</a></li>
<li class="dropdown">
  <a href="/foaf" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
  <ul class="dropdown-menu">
    <li><a href="/cv">Gregg's CV</a></li>
    <li><a href="/contact-information">Contact Information</a></li>
  </ul>
 </li>
<li><a href="/services">Services</a></li>
<li><a href="/photography">Gregg's Photography</a></li>
<li><a href="http://rdf.greggkellogg.net">RDF Distiller</a></li>

          </ul>
          <ul class="navbar-nav nav navbar-right" data-purplecoat="shiori" data-purplecoat-label="nav-right.html">
            
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">
        
          <div class="col-sm-8">
            <div class="post-header">
  <h1 class="post-title-main">Implementing CSV on the Web</h1>
  <!-- Feel free to remove this div. Uses purplecoat: http://ellekasai.github.io/purplecoat.js -->
<div data-purplecoat="shiori" data-purplecoat-label="post-header.html">
<p class="text-muted">18 Apr 2015</p>
</div>
</div>
<div class="post-content">
  <p>As I blogged about <a href="https://greggkellogg.net/2015/04/csv-on-the-web/">before</a>, I’ve implemented the <a href="http://www.w3.org/blog/data/2015/04/16/csv-on-the-web-seeking-comments-and-implementations/">current drafts</a> of <a href="http://www.w3.org/2013/csvw/wiki/Main_Page">CSV on the Web</a> in the <a href="http://rubygems.org/gems/rdf-tabular">rdf-tabular gem</a>. The gem is is available from <a href="http://github.com/ruby-rdf/rdf-tabular">rdf-tabular repo</a> and is in the public domain (<a href="http://unlicense.org">Unlicense</a>) and is freely usable by anyone wishing to get a start on their own implementation. For those wishing to take an incremental approach, this post describes the basic workings of the gem, highlights more advanced cases necessary to pass the <a href="http://w3c.github.io/csvw/tests/">Test Suite</a> and attempts to provide some insight into the process of implementing the specifications.</p>

<h2 id="csvw--in-a-nutshell">CSVW – in a nutshell</h2>

<p>The basic purpose of the CSVW specifications is to do an informed process of CSVs into an <em>annotated data model</em>, and use this model as the basis of creating RDF or JSON. At a minimum, this means assuming that the first row of a CSV is a <em>header row</em> containing <em>titles</em> for cells in that CSV, and that each row constitutes a record with properties based on the <em>column titles</em> with values from each cell. We’ll use the canonical example of the <a href="http://w3c.github.io/csvw/tests/tree-ops.csv">tree-ops</a> example from the <a href="http://www.w3.org/TR/tabular-data-model/" title="Model for Tabular Data and Metadata on the Web">Model for Tabular Data</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GID,On Street,Species,Trim Cycle,Inventory Date
1,ADDISON AV,Celtis australis,Large Tree Routine Prune,10/18/2010
2,EMERSON ST,Liquidambar styraciflua,Large Tree Routine Prune,6/2/2010
</code></pre></div></div>

<p>This example has a header row and two data rows. The simple transformation of this to RDF without any external metadata would yield the following (in minimal mode):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@base &lt;http://w3c.github.io/csvw/tests/tree-ops.csv&gt; .

[
  &lt;#GID&gt; "2";
  &lt;#Inventory%20Date&gt; "6/2/2010";
  &lt;#On%20Street&gt; "EMERSON ST";
  &lt;#Species&gt; "Liquidambar styraciflua";
  &lt;#Trim%20Cycle&gt; "Large Tree Routine Prune"
] .

[
  &lt;#GID&gt; "1";
  &lt;#Inventory%20Date&gt; "10/18/2010";
  &lt;#On%20Street&gt; "ADDISON AV";
  &lt;#Species&gt; "Celtis australis";
  &lt;#Trim%20Cycle&gt; "Large Tree Routine Prune"
] .
</code></pre></div></div>

<p>This is minimally useful, but we can use this as a walk-through of how the <a href="http://rubygems.org/gems/rdf-tabular">rdf-tabular gem</a> creates this.</p>

<p>The first step is to retrieve the document from It’s URL: <code class="language-plaintext highlighter-rouge">http://w3c.github.io/csvw/tests/tree-ops.csv</code>. We then can look for metadata associated with the file to inform the creation of the <em>annotated table</em>; this information might come from by the user specifying to location of metadata separately, from an HTTP Link header, by looking at <code class="language-plaintext highlighter-rouge">http://w3c.github.io/csvw/tests/tree-ops.csv-metadata.json</code> for file-specific metadata, or at <code class="language-plaintext highlighter-rouge">http://w3c.github.io/csvw/tests/metadata.json</code> for directory-specific metadata. In this case, there is none, so we constructed <em>embedded metatata</em> from just the <em>header row</em>. The process for locating metadata is described in <a href="http://www.w3.org/TR/tabular-data-model/#creating-annotated-tables">Creating Annotated Tables</a>, and creating embedded metadata is described in <a href="http://www.w3.org/TR/tabular-data-model/#parsing">Parsing Tabular Data</a>. Basically, we’re looking to create a <em>table description</em> with a <em>schema</em> describing each <em>column</em> resulting in the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "@context": "http://www.w3.org/ns/csvw",
  "url": "http://w3c.github.io/csvw/tests/tree-ops.csv",
  "tableSchema": {
    "columns": [
      {"titles": "GID"},
      {"titles": "On Street"},
      {"titles": "Species"},
      {"titles": "Trim Cycle"},
      {"titles": "Inventory Date"}
    ]
  }
}
</code></pre></div></div>

<p>By following the rules in the <a href="http://www.w3.org/TR/tabular-metadata/" title="Metadata Vocabulary for Tabular Data">Metadata Format</a>, we then create annotations on an <em>annotated table</em> (an abstract model, shown in arbitrary JSON):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "@type": "AnnotatedTableGroup",
  "tables": [
    {
      "@type": "AnnotatedTable",
      "url": "http://w3c.github.io/csvw/tests/tree-ops.csv",
      "columns": [
        {
          "@id": "http://w3c.github.io/csvw/tests/tree-ops.csv#col=1",
          "@type": "Column",
          "number": 1,
          "sourceNumber": 1,
          "cells": [],
          "name": "GID",
          "titles": {"und": ["GID"]}
        },
        {
          "@id": "http://w3c.github.io/csvw/tests/tree-ops.csv#col=2",
          "@type": "Column",
          "number": 2,
          "sourceNumber": 2,
          "cells": [],
          "name": "On%20Street",
          "titles": {"und": ["On Street"]}
        },
        {
          "@id": "http://w3c.github.io/csvw/tests/tree-ops.csv#col=3",
          "@type": "Column",
          "number": 3,
          "sourceNumber": 3,
          "cells": [],
          "name": "Species",
          "titles": {"und": ["Species"]}
        },
        {
          "@id": "http://w3c.github.io/csvw/tests/tree-ops.csv#col=4",
          "@type": "Column",
          "number": 4,
          "sourceNumber": 4,
          "cells": [],
          "name": "Trim%20Cycle",
          "titles": {"und": ["Trim Cycle"]}
        },
        {
          "@id": "http://w3c.github.io/csvw/tests/tree-ops.csv#col=5",
          "@type": "Column",
          "number": 5,
          "sourceNumber": 5,
          "cells": [],
          "name": "Inventory%20Date",
          "titles": {"und": ["Inventory Date"]}
        }
      ],
      "rows": []
    }
  ]
}
</code></pre></div></div>

<p>Here we gather some metadata based on the row and column numbers (logical and actual, which are the same here) and create a default for the <em>column name</em> from <em>titles</em>. Also, note that <em>titles</em> is expanded to a <a href="http://w3c.github.io/csvw/metadata/#dfn-natural-language-property">natural language property</a>, which is basically a <a href="http://www.w3.org/TR/json-ld/#language-maps">JSON-LD Language Map</a> where <code class="language-plaintext highlighter-rouge">und</code> is used when there is no language. The <em>column name</em> is percent encoded so that it can be used in a <a href="https://tools.ietf.org/html/rfc6570">URI template</a>.</p>

<p>Note that the <code class="language-plaintext highlighter-rouge">rows</code> and <code class="language-plaintext highlighter-rouge">cells</code> values are empty, as we haven’t actually processed any rows from the input yet.</p>

<p>The <a href="http://rubygems.org/gems/rdf-tabular">rdf-tabular gem</a> implements the <a href="https://ruby-rdf.github.io/rdf/RDF/Reader">RDF::Reader</a> pattern, which takes care of much of the process of opening the file and getting useful metadata. In the case of the <a href="http://rubygems.org/gems/rdf-tabular">rdf-tabular gem</a>, this includes the steps described in <a href="http://www.w3.org/TR/tabular-data-model/#creating-annotated-tables">Creating Annotated Tables</a> which involves recursive invocations of the reader, but nominally, it yields a <em>reader instance</em> which implements the <a href="https://ruby-rdf.github.io/rdf/RDF/Enumerable">RDF::Enumerable</a> pattern. In particular, the reader implements an <code class="language-plaintext highlighter-rouge">#each</code> method to yield each RDF Statement (triple); this is where the work actually happens. A call looks like the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RDF::Tabular::Reader.open("http://w3c.github.io/csvw/tests/tree-ops.csv") do |reader|
  reader.each do |statement|
    puts statement.inspect
  end
end
</code></pre></div></div>

<p>Basically, the job of the reader is to create the <em>abstract tabular data model</em> and use it to read each row of the table(s) described in the model and use that to generate RDF triples (it can also be used to generate JSON output without going the RDF, but that’s another story).</p>

<p>The <a href="http://rubygems.org/gems/rdf-tabular">rdf-tabular gem</a> implements <code class="language-plaintext highlighter-rouge">RDF::Tabular::Metadata</code>, with subclasses for the different kinds of metadata we need. This provides the <code class="language-plaintext highlighter-rouge">#each_row</code> method, which given an input file yields each row. For the Ruby implementation, we use the <a href="http://docs.ruby-lang.org/en/2.1.0/CSV.html">CSV library</a> and use dialect information to set parsing defaults. The gist of the implementation looks like the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def each_row(input)
  csv = ::CSV.new(input, csv_options)
  # Skip skipRows and headerRowCount
  number, skipped = 0, (dialect.skipRows.to_i + dialect.headerRowCount)
  (1..skipped).each {csv.shift}
  csv.each do |data|
    number += 1
    yield(Row.new(data, self, number, number + skipped))
  end
end
</code></pre></div></div>

<p>A <code class="language-plaintext highlighter-rouge">Row</code> then abstracts information for each table row and provides the cells for that row:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Wraps each resulting row
class Row
  attr_reader :values

  # Class for returning values
  Cell = Struct.new(:table, :column, :row, :stringValue, :value, :errors)

  def initialize(row, metadata, number, source_number)
    @values = []
    skipColumns = metadata.dialect.skipColumns.to_i
    columns = metadata.tableSchema.columns
    row.each_with_index do |value, index|
      next if index &lt; skipColumns
      column = columns[index - skipColumns]
      @values &lt;&lt; cell = Cell.new(metadata, column, self, value)
    end
  end
end
</code></pre></div></div>

<p>There’s more to this in the actual implementation, of course, but this handles a simple value.</p>

<p>Now we can implement <code class="language-plaintext highlighter-rouge">RDF::Tabular::Reader#each_statement</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def each_statement(&amp;block)
  metadata.each_row(input) do |row|
    default_cell_subject = RDF::Node.new
    row.values.each_with_index do |cell, index|
      propertyUrl = RDF::URI("#{metadata.url}##{cell.column.name}")
      yield RDF::Statement(default_cell_subject, propertyUrl, cell.value)
    end
  end
end
</code></pre></div></div>

<p>That’s pretty much the basis of a Ruby implementation. There’s more work to do in <code class="language-plaintext highlighter-rouge">#each_statement</code>, as It’s initially invoked with a <em>TableGroup</em>, which recursively invokes it again for each <em>Table</em>, which then calls again for the actual CSV, but that’s all setup. There’s also work in <code class="language-plaintext highlighter-rouge">RDF::Tabular::Reader#initialize</code> to find the metadata, ensure that it is compatible with the actual tables, and so forth.</p>

<h2 id="fleshing-out-with-more-details">Fleshing out with more details</h2>

<p>So, this implements a basic reader interface from a CSV using the <em>abstract tabular data model</em>, but the output’s not too interesting. What if we want to make the data richer:</p>

<ul>
  <li>Give unique identifiers (<em>subjects</em>) to the cells in a row</li>
  <li>Use <em>subjects</em> for different cells</li>
  <li>Define <em>property URIs</em> for each cell</li>
  <li>Assign and match cell <em>string values</em> to datatypes</li>
  <li>Parse microformats within a given cell</li>
</ul>

<p>For that we need to define a Metadata file.</p>

<h3 id="defining-metadata">Defining Metadata</h3>

<p>A Metadata file is a <a href="http://www.w3.org/TR/json-ld" title="JSON-LD 1.0">JSON-LD</a> document (really, it has the structure of a JSON-LD document, it is parsed as JSON) which allows us to define <em>properties</em> on metadata <em>declarations</em> which directly relate to the <em>abstract tabular data model</em>. For example, let’s look at the metadata description for the <a href="http://w3c.github.io/csvw/tests/test011/tree-ops.csv">tree-ops</a> example: <a href="http://w3c.github.io/csvw/tests/test011/tree-ops.csv-metadata.json">tree-ops.csv-metadata.json</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "url": "tree-ops.csv",
  "dc:title": "Tree Operations",
  "dcat:keyword": ["tree", "street", "maintenance"],
  "dc:publisher": {
    "schema:name": "Example Municipality",
    "schema:url": {"@id": "http://example.org"}
  },
  "dc:license": {"@id": "http://opendefinition.org/licenses/cc-by/"},
  "dc:modified": {"@value": "2010-12-31", "@type": "xsd:date"},
  "tableSchema": {
    "columns": [{
      "name": "GID",
      "titles": ["GID", "Generic Identifier"],
      "dc:description": "An identifier for the operation on a tree.",
      "datatype": "string",
      "required": true
    }, {
      "name": "on_street",
      "titles": "On Street",
      "dc:description": "The street that the tree is on.",
      "datatype": "string"
    }, {
      "name": "species",
      "titles": "Species",
      "dc:description": "The species of the tree.",
      "datatype": "string"
    }, {
      "name": "trim_cycle",
      "titles": "Trim Cycle",
      "dc:description": "The operation performed on the tree.",
      "datatype": "string"
    }, {
      "name": "inventory_date",
      "titles": "Inventory Date",
      "dc:description": "The date of the operation that was performed.",
      "datatype": {"base": "date", "format": "M/d/yyyy"}
    }],
    "primaryKey": "GID",
    "aboutUrl": "#gid-{GID}"
  }
}
</code></pre></div></div>

<p>Here we have a couple of different things going on. Note the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "url": "tree-ops.csv",
  "dc:title": "Tree Operations",
  "dcat:keyword": ["tree", "street", "maintenance"],
  "dc:publisher": {
    "schema:name": "Example Municipality",
    "schema:url": {"@id": "http://example.org"}
  },
  "dc:license": {"@id": "http://opendefinition.org/licenses/cc-by/"},
  "dc:modified": {"@value": "2010-12-31", "@type": "xsd:date"},
  ...
}
</code></pre></div></div>

<p>The <em>prefixed name</em> properties are <em>common properties</em>, basically just JSON-LD that’s inserted into the model to define <em>annotations</em> on the model. In this case, their defined on a <em>Table</em>, so they annotate that model. As it is JSON-LD, the string values take the <code class="language-plaintext highlighter-rouge">@langauge</code> defined in the context. CSVW uses a <a href="http://www.w3.org/TR/tabular-metadata/#json-ld-dialect">dialect of JSON-LD</a> which places some restrictions on what can go here. Basically, nothing more can go into the <code class="language-plaintext highlighter-rouge">@context</code> besides <code class="language-plaintext highlighter-rouge">@language</code> and <code class="language-plaintext highlighter-rouge">@base</code>; it also must use <code class="language-plaintext highlighter-rouge">http://www.w3.org/ns/csvw</code> and only the terms and prefixes defined within that context can be used along with absolute IRIs.</p>

<pre>{
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "url": "tree-ops.csv",
  ...
  "tableSchema": {
    "columns": [{
      "name": "GID",
      "titles": ["GID", "Generic Identifier"],
      "dc:description": "An identifier for the operation on a tree.",
      "datatype": "string",
      "required": true
    }, {
      "name": "on_street",
      "titles": "On Street",
      "dc:description": "The street that the tree is on.",
      "datatype": "string"
    }, {
      "name": "species",
      "titles": "Species",
      "dc:description": "The species of the tree.",
      "datatype": "string"
    }, {
      "name": "trim_cycle",
      "titles": "Trim Cycle",
      "dc:description": "The operation performed on the tree.",
      "datatype": "string"
    }, {
      "name": "inventory_date",
      "titles": "Inventory Date",
      "dc:description": "The date of the operation that was performed.",
      "datatype": {"base": "date", "format": "M/d/yyyy"}
    }],
    "primaryKey": "GID",
    "aboutUrl": "#gid-{GID}"
  }
}
</pre>

<p>The <code class="language-plaintext highlighter-rouge">tableSchema</code> property tells us that this is a <em>Table description</em>; we could also have added a <code class="language-plaintext highlighter-rouge">"@type": "Table"</code> property to make this explicit, but It’s not necessary. Metadata always starts with either a <em>Table description</em> or a <em>TableGroup description</em>.</p>

<p>We define an explicit <em>name</em> property for the first column. If we didn’t, it would take the first value from <em>titles</em>. The <em>column</em> has a <em>common property</em>, which is presently not used in the transformation, but exists in the <em>annotated tabular data model</em>. It also declares the data type to be <code class="language-plaintext highlighter-rouge">string</code>, which is a synonym for <code class="language-plaintext highlighter-rouge">xsd:string</code>, and a value is <code class="language-plaintext highlighter-rouge">required</code>, meaning that it is considered an error if a cell value has an empty string (or one matching that defined using the <code class="language-plaintext highlighter-rouge">null</code> annotation). Note that <code class="language-plaintext highlighter-rouge">datatype</code> is an <em>inherited property</em>, meaning that it could have been defined on the <em>Table</em>, <em>Schema</em> or <em>Column</em> and would be in scope for all cells based on the inheritance model.</p>

<p>The last column uses a complex datatype: It is based on <code class="language-plaintext highlighter-rouge">xsd:date</code> and uses a <code class="language-plaintext highlighter-rouge">format</code> string to match string values and map them onto the datatype. This allows a date of the form 4/17/2015 to be interpreted as <code class="language-plaintext highlighter-rouge">"2015-04-17"^^xsd:date</code> by using <em>date field symbols</em> as defined in <a href="http://www.unicode.org/reports/tr35/tr35-31/tr35.html">UAX35</a>.</p>

<p>All of these map pretty much as you would expect onto the <em>annotated tabular data model</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "@type": "AnnotatedTableGroup",
  "tables": [
    {
      "@type": "AnnotatedTable",
      "url": "http://w3c.github.io/csvw/tests/test011/tree-ops.csv",
      "dc:title": {"@value": "Tree Operations","@language": "en"},
      "dcat:keyword": [
        {"@value": "tree","@language": "en"},
        {"@value": "street","@language": "en"},
        {"@value": "maintenance","@language": "en"}
      ],
      "dc:publisher": {
        "schema:name": {"@value": "Example Municipality","@language": "en"},
        "schema:url": {"@id": "http://example.org"}
      },
      "dc:license": {"@id": "http://opendefinition.org/licenses/cc-by/"},
      "dc:modified": {"@value": "2010-12-31","@type": "xsd:date"},
      "columns": [
        {
          "@id": "http://w3c.github.io/csvw/tests/test011/tree-ops.csv#col=1",
          "@type": "Column",
          "number": 1,
          "sourceNumber": 1,
          "cells": [],
          "name": "GID",
          "titles": {"en": ["GID", "Generic Identifier"]},
          "dc:description": {"@value": "An identifier for the operation on a tree.", "@language": "en"},
          "datatype": {"base": "string"},
          "required": true
        },
        {
          "@id": "http://w3c.github.io/csvw/tests/test011/tree-ops.csv#col=2",
          "@type": "Column",
          "number": 2,
          "sourceNumber": 2,
          "cells": [],
          "name": "on_street",
          "titles": {"en": ["On Street"]},
          "dc:description": {"@value": "The street that the tree is on.","@language": "en"},
          "datatype": {"base": "string"}
        },
        {
          "@id": "http://w3c.github.io/csvw/tests/test011/tree-ops.csv#col=3",
          "@type": "Column",
          "number": 3,
          "sourceNumber": 3,
          "cells": [],
          "name": "species",
          "titles": {"en": ["Species"]},
          "dc:description": {"@value": "The species of the tree.","@language": "en"},
          "datatype": {"base": "string"}
        },
        {
          "@id": "http://w3c.github.io/csvw/tests/test011/tree-ops.csv#col=4",
          "@type": "Column",
          "number": 4,
          "sourceNumber": 4,
          "cells": [],
          "name": "trim_cycle",
          "titles": {"en": ["Trim Cycle"]},
          "dc:description": {"@value": "The operation performed on the tree.","@language": "en"},
          "datatype": {"base": "string"}
        },
        {
          "@id": "http://w3c.github.io/csvw/tests/test011/tree-ops.csv#col=5",
          "@type": "Column",
          "number": 5,
          "sourceNumber": 5,
          "cells": [],
          "name": "inventory_date",
          "titles": {"en": ["Inventory Date"]},
          "dc:description": {"@value": "The date of the operation that was performed.","@language": "en"},
          "datatype": {"base": "date", "format": "M/d/yyyy"}
        }
      ],
      "rows": []
    }
  ]
}
</code></pre></div></div>

<p>Note that the <em>common properties</em> have been expanded and the <code class="language-plaintext highlighter-rouge">@context</code> simplified to remove <code class="language-plaintext highlighter-rouge">@language</code>. Also <code class="language-plaintext highlighter-rouge">datatype</code> values have been normalized to the expanded form. This happens through the process of <em>Normalization</em>.</p>

<h3 id="normalization">Normalization</h3>

<p><a href="http://www.w3.org/TR/tabular-metadata/#normalization">Normalization</a> places metadata into a consistent format where compact values are expanded, values which may be an <em>Array</em> are made into an <em>Array</em>, <em>link properties</em> have their URL expanded based on the base of the metadata and <em>object properties</em> which are in the form of a URL string are opened and replaced with the content of the resource they reference.</p>

<h3 id="ensuring-metadata-compatibility-was-merging-metadata">Ensuring Metadata Compatibility (was Merging Metadata)</h3>

<p>The <a href="http://www.w3.org/TR/tabular-data-model/#locating-metadata">Locating Metadata</a> describes the various places metadata files may be found. <a href="http://www.w3.org/TR/tabular-data-model/#creating-annotated-tables">Creating Annotated Tables</a> defines the process of creating the final metadata when starting with either a Metadata File or a CSV. This calls for ensuring <a href="http://w3c.github.io/csvw/syntax/#metadata-compatibility">Metadata Compatibility</a>. Given metadata, this can be used to find one or more tabular data files. These files are considered <em>compatible</em> with the metadata, if they are referenced from the metadata (i.e., there is a Table Description referencing that particular tabular data file), and the columns in the Table Description Schema, match the columns in the tabular data file by comparing titles or names from the column metadata with the title of the tabular data file column, if it has one. This is necessary to ensure that the CSV file matches the schema described in metadata.</p>

<h3 id="uri-templates">URI Templates</h3>

<p>In the <a href="http://w3c.github.io/csvw/examples/tree-ops-virtual.json">tree-ops-virtual.json</a> example, <em>URI template properties</em> were defined:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "url": "tree-ops.csv",
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "tableSchema": {
    "columns": [{
      "name": "GID",
      "titles": "GID",
      "datatype": "string",
      "propertyUrl": "schema:url",
      "valueUrl": "#gid-{GID}"
    }, {
      "name": "on_street",
      "titles": "On Street",
      "datatype": "string",
      "aboutUrl": "#location-{GID}",
      "propertyUrl": "schema:streetAddress"
    }, {
      "name": "species",
      "titles": "Species",
      "datatype": "string",
      "propertyUrl": "schema:name"
    }, {
      "name": "trim_cycle",
      "titles": "Trim Cycle",
      "datatype": "string"
    }, {
      "name": "inventory_date",
      "titles": "Inventory Date",
      "datatype": {"base": "date", "format": "M/d/yyyy"},
      "aboutUrl": "#event-{inventory_date}",
      "propertyUrl": "schema:startDate"
    }, {
      "propertyUrl": "schema:event",
      "valueUrl": "#event-{inventory_date}",
      "virtual": true
    }, {
      "propertyUrl": "schema:location",
      "valueUrl": "#location-{GID}",
      "virtual": true
    }, {
      "aboutUrl": "#location-{GID}",
      "propertyUrl": "rdf:type",
      "valueUrl": "schema:PostalAddress",
      "virtual": true
    }],
    "aboutUrl": "#gid-{GID}"
  }
}
</code></pre></div></div>

<p>This introduces several new concepts:</p>

<ul>
  <li>The <em>Schema</em> has an <code class="language-plaintext highlighter-rouge">aboutUrl</code> property: <strong>“#gid-{GID}”</strong>. This is a <a href="https://tools.ietf.org/html/rfc6570">URI Template</a>, where <em>GID</em> acts as a variable, taking the <em>cell value</em> of the cell in the <em>GID</em> column to construct a URI. In this case it constructs values such as <code class="language-plaintext highlighter-rouge">&lt;http://w3c.github.io/csvw/examples/tree-ops.csv#gid-1&gt;</code>. This is because the <em>Table</em> <code class="language-plaintext highlighter-rouge">url</code> is <code class="language-plaintext highlighter-rouge">tree-ops.csv</code>, which is a URL relative to the location of the metadata file. In the first row, the value of the <code class="language-plaintext highlighter-rouge">GID</code> column is <code class="language-plaintext highlighter-rouge">1</code>, so that is substituted to create <strong>“#gid-1”</strong>, then resolved against <code class="language-plaintext highlighter-rouge">url</code>. This <code class="language-plaintext highlighter-rouge">aboutUrl</code> then defines the default subject for all cells within that row.</li>
</ul>

<p>The first column has <strong>“propertyUrl”: “schema:url”</strong>, which turns into the absolute URL <code class="language-plaintext highlighter-rouge">http://schema.org/url</code>, and is used as the <em>predicate</em> for that cell. As the column as a <code class="language-plaintext highlighter-rouge">valueUrl</code> (<strong>“valueUrl”: “#gid-{GID}”</strong>), that is expanded and used as the object for that cell. Thus, the first cell of the first row would result in the following triple:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;#gid-1&gt; schema:url &lt;#gid-1&gt; .
</code></pre></div></div>

<p>(relative to the URL file location).</p>

<p>The second column has It’s own <code class="language-plaintext highlighter-rouge">aboutUrl</code> (<strong>“aboutUrl”: “#location-{GID}”</strong>), meaning that the <em>subject</em> for triples for this column are different than the <em>default subject</em>.</p>

<p>The last three columns are <em>virtual columns</em>, as they don’t correspond to data actually in the CSV; these are used for injecting information into the row. When fully processed, the following RDF is created (again, in minimal mode):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@base &lt;http://w3c.github.io/csvw/examples/tree-ops.csv&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix schema: &lt;http://schema.org/&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

&lt;#event-2010-06-02&gt; schema:startDate "2010-06-02"^^xsd:date .

&lt;#event-2010-10-18&gt; schema:startDate "2010-10-18"^^xsd:date .

&lt;#gid-1&gt; schema:event &lt;#event-2010-10-18&gt;;
   schema:location &lt;#location-1&gt;;
   schema:name "Celtis australis";
   schema:url &lt;#gid-1&gt;;
   &lt;#trim_cycle&gt; "Large Tree Routine Prune" .

&lt;#gid-2&gt; schema:event &lt;#event-2010-06-02&gt;;
   schema:location &lt;#location-2&gt;;
   schema:name "Liquidambar styraciflua";
   schema:url &lt;#gid-2&gt;;
   &lt;#trim_cycle&gt; "Large Tree Routine Prune" .

&lt;#location-1&gt; a schema:PostalAddress;
   schema:streetAddress "ADDISON AV" .

&lt;#location-2&gt; a schema:PostalAddress;
   schema:streetAddress "EMERSON ST" .
</code></pre></div></div>

<p>Processing this requires some enhancement to <code class="language-plaintext highlighter-rouge">RDF::Tabular::Row#initialize</code> method:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Wraps each resulting row
class Row
  attr_reader :values

  # Class for returning values
  Cell = Struct.new(:table, :column, :row, :stringValue, :aboutUrl, :propertyUrl, :valueUrl, :value, :errors) do

    def set_urls(mapped_values)
      %w(aboutUrl propertyUrl valueUrl).each do |prop|
        # If the cell value is nil, and it is not a virtual column
        next if prop == "valueUrl" &amp;&amp; value.nil? &amp;&amp; !column.virtual
        if v = column.send(prop.to_sym)
          t = Addressable::Template.new(v)
          mapped = t.expand(mapped_values).to_s
          url = row.context.expand_iri(mapped, documentRelative: true)
          self.send("#{prop}=".to_sym, url)
        end
      end
    end

  end

  def initialize(row, metadata, number, source_number)
    @values = []
    skipColumns = metadata.dialect.skipColumns.to_i
    columns = metadata.tableSchema.columns
    row.each_with_index do |value, index|
      next if index &lt; skipColumns
      column = columns[index - skipColumns]
      @values &lt;&lt; cell = Cell.new(metadata, column, self, value)

      datatype = column.datatype || Datatype.new(base: "string", parent: column)
      cell_value = value_matching_datatype(value.dup, datatype, expanded_dt, column.lang)
      map_values[columns[index - skipColumns].name] =  cell_value.to_s

    end

    # Map URLs for row
    ...
  end
end
</code></pre></div></div>

<p>This introduces datatype matching through <code class="language-plaintext highlighter-rouge">#value_matching_datatype</code> (not detailed), creates a <code class="language-plaintext highlighter-rouge">map_values</code> structure that can be used for <a href="https://tools.ietf.org/html/rfc6570">URI template</a> processing, and then calls <code class="language-plaintext highlighter-rouge">Cell#set_urls</code> to actually create <code class="language-plaintext highlighter-rouge">aboutUrl</code>, <code class="language-plaintext highlighter-rouge">propertyUrl</code>, and <code class="language-plaintext highlighter-rouge">valueUrl</code> annotations on the cell.</p>

<p>The <code class="language-plaintext highlighter-rouge">#each_statement</code> method is updated to take these into consideration:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def each_statement(&amp;block)
  metadata.each_row(input) do |row|
    default_cell_subject = RDF::Node.new
    row.values.each_with_index do |cell, index|
      cell_subject = cell.aboutUrl || default_cell_subject
      propertyUrl = cell.propertyUrl || RDF::URI("#{metadata.url}##{cell.column.name}")
        yield RDF::Statement(cell_subject, propertyUrl, cell.column.valueUrl || cell.value)
    end
  end
end
</code></pre></div></div>

<p>Here the only difference is that we use <code class="language-plaintext highlighter-rouge">cell.aboutUrl</code>, <code class="language-plaintext highlighter-rouge">cell.propertyUrl</code>, and <code class="language-plaintext highlighter-rouge">cell.valueUrl</code> if they are defined, and the defaults otherwise.</p>

<h3 id="multiple-values">Multiple Values</h3>

<p>Microsyntaxes are common in CSVs, and there are many different kind. A microsyntax is some convention for formatting information within a cell. CSVW supports delimited values within a cell, so that a list of elements can be provided, allowing a single cell to contain multiple values.</p>

<p>For example the <a href="http://w3c.github.io/csvw/examples/tree-ops-ext.csv">tree-ops-ext.csv</a> example allows for multiple comments on a record using “;” as a separator:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GID,On Street,Species,Trim Cycle,Diameter at Breast Ht,Inventory Date,Comments,Protected,KML
1,ADDISON AV,Celtis australis,Large Tree Routine Prune,11,10/18/2010,,,"&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"
2,EMERSON ST,Liquidambar styraciflua,Large Tree Routine Prune,11,6/2/2010,,,"&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"
6,ADDISON AV,Robinia pseudoacacia,Large Tree Routine Prune,29,6/1/2010,cavity or decay; trunk decay; codominant leaders; included bark; large leader or limb decay; previous failure root damage; root decay;  beware of BEES,YES,"&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"
</code></pre></div></div>

<p>The <a href="http://w3c.github.io/csvw/examples/tree-ops-ext.csv-metadata.json">metadata file</a> adds the <code class="language-plaintext highlighter-rouge">separator</code> property to the <em>comments</em> column:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "tableSchema": {
    "columns": [
      ...
      {
        "name": "comments",
        "titles": "Comments",
        "dc:description": "Supplementary comments relating to the operation or tree.",
        "datatype": "string",
        "separator": ";"
      }
    ]
  }
}
</code></pre></div></div>

<p>The effect of <code class="language-plaintext highlighter-rouge">separator</code> is to split the string value into multiple values and parse them using any <code class="language-plaintext highlighter-rouge">datatype</code> description. This is shown using slight modifications to <code class="language-plaintext highlighter-rouge">RDF::Tabular::Row#initialize</code> and <code class="language-plaintext highlighter-rouge">RDF::Tabular::Reader#each_statement</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Wraps each resulting row
class Row
  attr_reader :values
  def initialize(row, metadata, number, source_number)
    @values = []
    skipColumns = metadata.dialect.skipColumns.to_i
    columns = metadata.tableSchema.columns
    row.each_with_index do |value, index|
      next if index &lt; skipColumns
      column = columns[index - skipColumns]
      @values &lt;&lt; cell = Cell.new(metadata, column, self, value)
      datatype = column.datatype || Datatype.new(base: "string", parent: column)


      cell_values = column.separator ? value.split(column.separator) : [value]

      cell_values = cell_values.map do |v|
        value_matching_datatype(v.dup, datatype, expanded_dt, column.lang)
      end

      cell.value = (column.separator ? cell_values : cell_values.first)

      map_values[columns[index - skipColumns].name] =  (column.separator ? cell_values.map(&amp;:to_s) : cell_values.first.to_s)
    end

    # Map URLs for row
    @values.each_with_index do |cell, index|
      mapped_values = map_values.merge(
        "_name" =&gt; URI.decode(cell.column.name),
        "_column" =&gt; cell.column.number,
        "_sourceColumn" =&gt; cell.column.sourceNumber
      )
      cell.set_urls(mapped_values)
    end

  end
end
</code></pre></div></div>

<p>The only change to <code class="language-plaintext highlighter-rouge">#each_statement</code> is to consider multiple cell values:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def each_statement(&amp;block)
  metadata.each_row(input) do |row|
    default_cell_subject = RDF::Node.new
    row.values.each_with_index do |cell, index|
      cell_subject = cell.aboutUrl || default_cell_subject
      propertyUrl = cell.propertyUrl || RDF::URI("#{metadata.url}##{cell.column.name}")

      if cell.column.valueUrl
        yield RDF::Statement(cell_subject, propertyUrl, cell.column.valueUrl)
      else
        Array(cell.value).each do |v|
          yield RDF::Statement(cell_subject, propertyUrl, v)
        end
      end

    end
  end
end
</code></pre></div></div>

<h3 id="common-properties-and-notes">Common Properties and Notes</h3>

<p>Common Properties and Notes are simply embedded <a href="http://www.w3.org/TR/json-ld" title="JSON-LD 1.0">JSON-LD</a> within the metadata file (although limited) to a specific <a href="http://www.w3.org/TR/tabular-metadata/#json-ld-dialect">dialect</a> to simplify implementations. In Ruby, of course, we have available a full <a href="http://rubygems.org/gems/json-ld">json-ld gem</a>, so turning this into RDF shouldn’t present any problems.</p>

<h2 id="conclusion">Conclusion</h2>

<p>This article has shown the basis for implementing the <a href="http://www.w3.org/2013/csvw/wiki/Main_Page">CSV on the Web</a> specifications, and hopefully will aid in more implementations.</p>

<h2 id="update-2014-05-14">Update 2014-05-14</h2>

<p>This post has been updated to reflect the fact the metadata merging has been removed from CSVW, simplifying an implementation even further.</p>

</div>
<div class="post-footer">
  <!-- Feel free to remove this div. Uses purplecoat: http://ellekasai.github.io/purplecoat.js -->
<div data-purplecoat="shiori" data-purplecoat-label="post-footer.html">
  <p>
    Posted in
    
      <a href="/categories/ruby">Ruby</a>
    
      <a href="/categories/semantic-web">Semantic Web</a>
    
  </p>
  <div id="disqus_thread"></div>
  <script id="dsq-count-scr" src="//greggkellogg-1.disqus.com/count.js" async></script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>
</div>

  
    <div class="post-navs row">
      
        <div class="col-md-6 post-nav">
          <h3 class="section-header">
            Older
            <span class="text-muted"> &middot; </span>
            <a href="/archive">View Archive (67)</a>
          </h3>
          <h2 class="post-title-link"><a href="/2015/04/csv-on-the-web/">CSV on the Web</a></h2>
          <p>As many who follow me know, I’ve long been involved in the Linked Data and Semantic Web movements. It’s been my privilege to work on several successful projects, notably <a href="http://www.w3.org/TR/rdfa-core" title="HTML+RDFa 1.1">RDFa</a>, <a href="http://www.w3.org/TR/microdata-rdf" title="Microdata to RDF">Microdata RDF</a>, and <a href="http://www.w3.org/TR/json-ld" title="JSON-LD 1.0">JSON-LD</a>. For the past several months I’ve actively been working with the W3C <a href="http://www.w3.org/2013/csvw/wiki/Main_Page">CSV on the Web</a> Working Group to help define a mechanism for transforming tabular data into RDF and JSON.</p>

        </div>
      
      
        <div class="col-md-6 post-nav">
          <h3 class="section-header">
            Newer
            
          </h3>
          <h2 class="post-title-link"><a href="/2015/08/csv-on-the-web-presentation/">CSV on the Web presentation</a></h2>
          <p>I presented <a href="http://www.w3.org/2013/csvw/wiki/Main_Page">CSV on the Web</a> at the <a href="http://smartdata2015.dataversity.net">Smart Data Conference</a> in San Jose. The slides are on <a href="http://www.slideshare.net/gkellogg1/tabular-data-on-the-web">SlideShare</a>.</p>

        </div>
      
    </div>
  


          </div>
          <div class="col-sm-4">
            <!-- Feel free to remove this div. Uses purplecoat: http://ellekasai.github.io/purplecoat.js -->
<div data-purplecoat="shiori" data-purplecoat-label="sidebar.html">
  <h3 class="section-header">
    Recent Posts
  </h3>
  <ul>
  
    <li class="post-title-reference">
      <a href="/2022/06/Roatan/" class="post-title-archive">Roatan June 2022</a>
    </li>
  
    <li class="post-title-reference">
      <a href="/2021/06/Roatan/" class="post-title-archive">Roatan June 2021</a>
    </li>
  
    <li class="post-title-reference">
      <a href="/2019/08/channel-islands-august-2019/" class="post-title-archive">Channel Islands August 2019</a>
    </li>
  
    <li class="post-title-reference">
      <a href="/2019/06/saint-lucia-june-2019/" class="post-title-archive">Saint Lucia June 2019</a>
    </li>
  
    <li class="post-title-reference">
      <a href="/2015/08/csv-on-the-web-presentation/" class="post-title-archive">CSV on the Web presentation</a>
    </li>
  
  </ul>
</div>

<div data-purplecoat="shiori" data-purplecoat-label="sidebar.html">
  <h3 class="section-header">
    Categories
  </h3>
  <ul>
  
    
    <li class="post-title-reference">
      <a href="/categories/design" class="post-title-archive">Design</a>
    </li>
  
    
    <li class="post-title-reference">
      <a href="/categories/diving" class="post-title-archive">Diving</a>
    </li>
  
    
    <li class="post-title-reference">
      <a href="/categories/photography" class="post-title-archive">Photography</a>
    </li>
  
    
    <li class="post-title-reference">
      <a href="/categories/ruby" class="post-title-archive">Ruby</a>
    </li>
  
    
    <li class="post-title-reference">
      <a href="/categories/semantic-web" class="post-title-archive">Semantic Web</a>
    </li>
  
    
    <li class="post-title-reference">
      <a href="/categories/media" class="post-title-archive">Media</a>
    </li>
  
    
    <li class="post-title-reference">
      <a href="/categories/javascript" class="post-title-archive">JavaScript</a>
    </li>
  
  </ul>
</div>

<div data-purplecoat="shiori" data-purplecoat-label="sidebar.html">
  <h3 class="section-header">
    Archives
  </h3>
  
  <ul>
  
    
      
      <li class="post-title-reference">
        <a href="/2022/06" class="post-title-archive">June 2022</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2021/06" class="post-title-archive">June 2021</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2019/06" class="post-title-archive">June 2019</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2015/08" class="post-title-archive">August 2015</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2015/04" class="post-title-archive">April 2015</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2013/12" class="post-title-archive">December 2013</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2013/09" class="post-title-archive">September 2013</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2013/05" class="post-title-archive">May 2013</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2013/01" class="post-title-archive">January 2013</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2012/08" class="post-title-archive">August 2012</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2012/05" class="post-title-archive">May 2012</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2012/03" class="post-title-archive">March 2012</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2012/02" class="post-title-archive">February 2012</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2012/01" class="post-title-archive">January 2012</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2011/12" class="post-title-archive">December 2011</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2011/10" class="post-title-archive">October 2011</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2011/09" class="post-title-archive">September 2011</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2011/08" class="post-title-archive">August 2011</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2011/06" class="post-title-archive">June 2011</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2011/05" class="post-title-archive">May 2011</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2011/03" class="post-title-archive">March 2011</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2010/12" class="post-title-archive">December 2010</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2010/09" class="post-title-archive">September 2010</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2010/07" class="post-title-archive">July 2010</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2010/05" class="post-title-archive">May 2010</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2010/04" class="post-title-archive">April 2010</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2010/02" class="post-title-archive">February 2010</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2010/01" class="post-title-archive">January 2010</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2009/10" class="post-title-archive">October 2009</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2009/09" class="post-title-archive">September 2009</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2009/08" class="post-title-archive">August 2009</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2009/01" class="post-title-archive">January 2009</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2008/10" class="post-title-archive">October 2008</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2008/09" class="post-title-archive">September 2008</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2008/07" class="post-title-archive">July 2008</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2008/05" class="post-title-archive">May 2008</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2007/10" class="post-title-archive">October 2007</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2007/07" class="post-title-archive">July 2007</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2007/06" class="post-title-archive">June 2007</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2007/05" class="post-title-archive">May 2007</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2007/01" class="post-title-archive">January 2007</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2006/11" class="post-title-archive">November 2006</a>
      </li>
    
  
    
      
      <li class="post-title-reference">
        <a href="/2006/10" class="post-title-archive">October 2006</a>
      </li>
    
  
  </ul>
</div>

          </div>
        
      </div>
      <div class="row footer">
        <!-- Feel free to remove this div. Uses purplecoat: http://ellekasai.github.io/purplecoat.js -->
<footer class="site-footer" data-purplecoat="shiori" data-purplecoat-label="footer.html">
  <div class="footer-col-wrapper">
    <div class="footer-col footer-col-1">
      <ul class="contact-list">
        <li>
          
            Gregg Kellogg
          
          </li>
          
          <li><a href="mailto:gregg@greggkellogg.net">gregg@greggkellogg.net</a></li>
          
      </ul>
    </div>

    <div class="footer-col footer-col-2">
      
      <ul id="social-media" class="social-media-list">
        
        
          
          
            <li><a rel="me" href="https://www.twitter.com/gkellogg" title="Twitter">
              
                <i class="fa fa-twitter-square"></i>
              
              gkellogg
            </a></li>
          
        
          
          
            <li><a rel="me" href="https://github.com/gkellogg" title="GitHub">
              
                <i class="fa fa-github-square"></i>
              
              gkellogg
            </a></li>
          
        
          
          
            <li><a rel="me" href="https://mastodon.social/@gkellogg" title="Mastodon">
              
              <!-- Needs newer version of fontawesome -->
                M
              
              gkellogg
            </a></li>
          
        
      </ul>
      
    </div>

    <div class="footer-col footer-col-3">
      <ul class="contact-list">
        <li>Gregg&#39;s Personal Blog</li>
        <li>
          &copy;2022.
          Built with <a href="http://jekyllrb.com/">Jekyll</a> and
          <a href="https://github.com/ellekasai/shiori">Shiori Theme</a>
        </li>
      </ul>
    </div>
  </div>
</footer>
      </div>
    </div>
    <script src="/javascripts/jquery.min.js"></script>
    <script src="/javascripts/bootstrap.min.js"></script>
    <script src="/javascripts/purplecoat-min.js"></script>
    <!-- Place your <script> tags here. -->

<!-- Example: Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  </body>
</html>
